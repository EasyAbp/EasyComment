@using EasyAbp.EasyComment.Comments.Dtos
@using EasyAbp.EasyComment.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@using Volo.Abp.Users
@inject IHtmlLocalizer<EasyCommentResource> L
@inject ICurrentUser CurrentUser

<abp-container class="ec-comments">
    <abp-row>
        <i class="fa fa-comments"> @L["TotalComments", Model.TotalCount]</i>
    </abp-row>
    @{ int i = 1; }
    @foreach (CommentDto comment in Model.Items)
    {
        <abp-container class="ec-comment">
            <abp-row>
                <a class="ec-comment-link" href="#@comment.Id">#@(i++)</a>
                <p class="ec-creator">@comment.CreatorName</p>
                <time class="ec-comment-time" datetime="@comment.CreationTime">@comment.CreationTime</time>
            </abp-row>
            <p class="ec-content" id="@comment.Id">@comment.Content</p>
            <hr/>
        </abp-container>
    }
    @if (CurrentUser.IsAuthenticated)
    {
        <textarea class="ec-new-comment" id="new-comment" name="new-comment" rows="5"></textarea>
        <abp-button type="primary"/>
    }
    else
    {
    }
</abp-container>